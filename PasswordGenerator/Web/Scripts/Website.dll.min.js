(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;$.Define($$,{Website:{Password:{Settings:$.Class({},{Create:function(v,w,x,y){return $.New(c,{Length:v,UpperCase:w,Numbers:x,Other:y});}}),alpha:$.Field(function(){return e.toList(f.range(97,122));}),charStrength:function(z){var A;A=b["|Alpha|Upper|Number|Punct|Other|"](z);if(A.$==1){return 26;}else{if(A.$==2){return 9;}else{if(A.$==3){return 17;}else{if(A.$==4){return 17;}else{return 26;}}}}},generate:function(B,C){var D;D=b.shuffle(B);return e.toList(e.delay(function(){return e.collect(function(){var G;G=h.Next(0,B.get_Length()-1);return[D.get_Item(G)];},f.range(1,C));}));},"generate'":function(H){var I,J,K,L,Q;I=H.UpperCase;J=H.Numbers;K=H.Other;L=e.toList(e.delay(function(){return e.append(b.alpha(),e.delay(function(){return e.append(I?b.upperCase():e.empty(),e.delay(function(){return e.append(J?b.numbers():e.empty(),e.delay(function(){if(K){return b.punctuation();}else{return e.empty();}}));}));}));}));Q=H.Length;return b.generate(L,Q);},numbers:$.Field(function(){return e.toList(f.range(49,57));}),punctuation:$.Field(function(){return i.ofArray([126,96,33,64,35,36,37,94,38,42,40,41,45,95,43,61,34]);}),remove:function(R,S){var T,U;T=(U=function(V){return!j.Equals(V,R);},function(W){return i.filter(U,W);});return T(S);},shuffle:function(X){return e.toList(e.delay(function(){var Z,_0;Z=h.Next(0,X.get_Length()-1);_0=X.get_Item(Z);return e.append([_0],e.delay(function(){var _2;_2=b.remove(_0,X);if(!(_2.$==0)){return b.shuffle(_2);}else{return e.empty();}}));}));},strength:function(_3){var _4,_5,_6,_8,bd;_4=(_5=(_6=function(_7){return b.charStrength(_7);},e.sumBy(_6,_3)),(_8=function(_9){var _,ba,bb;_=(ba=k(_9),l.log(ba))*(k(_3.get_Length())/l.log(2));bb=function(bc){return l.floor(bc);};return bb(_);},_8(_5)));bd=function(be){var bf;bf=b["|Weak|Medium|Strong|Best|"](be);if(bf.$==1){return{$:1};}else{if(bf.$==2){return{$:2};}else{if(bf.$==3){return{$:3};}else{return{$:0};}}}};return bd(_4);},upperCase:$.Field(function(){return e.toList(f.range(65,90));}),"|Alpha|Upper|Number|Punct|Other|":function(bf){var bg,bh,bi,bl,bm,bn,bq,br,bs,bv,bw,bx;if(bg=b.alpha(),(bh=(bi=function(bj){return bj===bf;},function(bk){return e.exists(bi,bk);}),bh(bg))){return{$:0,$0:null};}else{if(bl=b.upperCase(),(bm=(bn=function(bo){return bo===bf;},function(bp){return e.exists(bn,bp);}),bm(bl))){return{$:1,$0:null};}else{if(bq=b.numbers(),(br=(bs=function(bt){return bt===bf;},function(bu){return e.exists(bs,bu);}),br(bq))){return{$:2,$0:null};}else{if(bv=b.punctuation(),(bw=(bx=function(by){return by===bf;},function(bz){return e.exists(bx,bz);}),bw(bv))){return{$:3,$0:null};}else{return{$:4,$0:null};}}}}},"|Weak|Medium|Strong|Best|":function(bA){if(bA>=128){return{$:3,$0:null};}else{if(bA<128?bA>=64:false){return{$:2,$0:null};}else{if(bA<64?bA>=56:false){return{$:1,$0:null};}else{return{$:0,$0:null};}}}}},SettingsFormlet:{Client:{SettingsFormletViewer:$.Class({get_Body:function(){return n.formlet();}}),form:$.Field(function(){var bB,bC,bD,bK,bM;bB=(bC=p.$(p.$(p.$(p.$((bD=function(bE){return function(bF){return function(bG){return function(bH){return(function(bI){return function(bJ){return c.Create(bE,bF,bI,bJ);};}(bG))(bH);};};};},q.Return(bD)),n.lengthSelect()),n.upperCaseCheckbox()),n.numbersCheckbox()),n.otherCheckbox()),(bK=function(bL){return r.WithSubmitAndResetButtons(bL);},bK(bC)));bM=function(bN){return r.WithFormContainer(bN);};return bM(bB);}),formlet:$.Field(function(){return q.Run(function(bO){var bP,bQ,bR,bS,bW,bX,bY;bP=b["generate'"](bO);bQ=(bR=(bS=function(bT){return function(bU){return bT+s.fromCharCode(bU);};},function(bV){return e.fold(bS,"",bV);}),bR(bP));bW=(bX=b.strength(bP),bX.$==1?["Medium",50,"progress progress-warning"]:bX.$==2?["Strong",75,"progress progress-success"]:bX.$==3?["Best",100,"progress progress-info"]:["Weak",25,"progress progress-danger"]);bY=$.Tupled(function(bZ){var b0,b1,b2;b0=bZ[0];b1=bZ[1];b2=bZ[2];return n.updateView(bQ,b0,b1,b2);});return bY(bW);},n.form());}),lengthList:$.Field(function(){var b3,b4,b5;b3=e.toList(f.range(6,32));b4=(b5=function(b6){return[$$.String(b6),b6];},function(b7){return i.map(b5,b7);});return b4(b3);}),lengthSelect:$.Field(function(){var b8,b9;b8=t.Select(8,n.lengthList());b9=function(b_){return r.WithTextLabel("Length",b_);};return b9(b8);}),numbersCheckbox:$.Field(function(){var b$,ca;b$=t.Checkbox(false);ca=function(cb){return r.WithTextLabel("Numbers",cb);};return ca(b$);}),otherCheckbox:$.Field(function(){var cc,cd;cc=t.Checkbox(false);cd=function(ce){return r.WithTextLabel("Other",ce);};return cd(cc);}),updateView:function(cf,cg,ch,ci){var cj;cj="width: "+$$.String(ch)+"%;";u("#password").attr("value",cf);u("#strengthLabel").text("Strength: "+cg);u("#progressDiv").attr("class",ci);return u("#progress").attr("style",cj);},upperCaseCheckbox:$.Field(function(){var ck,cl;ck=t.Checkbox(false);cl=function(cm){return r.WithTextLabel("Upper Case",cm);};return cl(ck);})}}}});$.OnInit(function(){a=$.Safe($$.Website);b=$.Safe(a.Password);c=$.Safe(b.Settings);d=$.Safe($$.IntelliFactory.WebSharper);e=$.Safe(d.Seq);f=$.Safe(d.Operators);g=$.Safe($$.ExtSharper);h=$.Safe(g.Random);i=$.Safe(d.List);j=$.Safe(d.Unchecked);k=$.Safe($$.Number);l=$.Safe($$.Math);m=$.Safe(a.SettingsFormlet);n=$.Safe(m.Client);o=$.Safe(d.Formlet);p=$.Safe(o.Data);q=$.Safe(o.Formlet);r=$.Safe(o.Enhance);s=$.Safe($$.String);t=$.Safe(o.Controls);return u=$.Safe($$.jQuery);});$.OnLoad(function(){n.upperCaseCheckbox();n.otherCheckbox();n.numbersCheckbox();n.lengthSelect();n.lengthList();n.formlet();n.form();b.upperCase();b.punctuation();b.numbers();b.alpha();});}());
