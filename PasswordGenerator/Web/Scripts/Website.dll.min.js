(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;$.Define($$,{Website:{Password:{Settings:$.Class({},{Create:function(t,u,v,w){return $.New(c,{Length:t,UpperCase:u,Numbers:v,Other:w});}}),alpha:$.Field(function(){return e.toList(f.range(97,122));}),charStrength:function(x){var y;y=b["|Alpha|Upper|Number|Punct|Other|"](x);if(y.$==1){return 26;}else{if(y.$==2){return 9;}else{if(y.$==3){return 17;}else{if(y.$==4){return 17;}else{return 26;}}}}},generate:function(z,A){var B;B=b.shuffle(z);return e.toList(e.delay(function(){return e.collect(function(){var E;E=b.random(0,z.get_Length()-1);return[B.get_Item(E)];},f.range(1,A));}));},"generate'":function(F){var G,H,I,J,O;G=F.UpperCase;H=F.Numbers;I=F.Other;J=e.toList(e.delay(function(){return e.append(b.alpha(),e.delay(function(){return e.append(G?b.upperCase():e.empty(),e.delay(function(){return e.append(H?b.numbers():e.empty(),e.delay(function(){if(I){return b.punctuation();}else{return e.empty();}}));}));}));}));O=F.Length;return b.generate(J,O);},numbers:$.Field(function(){return e.toList(f.range(49,57));}),punctuation:$.Field(function(){return g.ofArray([126,96,33,64,35,36,37,94,38,42,40,41,45,95,43,61,34]);}),random:function(P,Q){var R,S,T,V;R=h.random()*(S=Q-P+1,(T=function(U){return i(U);},T(S)));V=function(W){return h.floor(W);};return V(R);},remove:function(X,Y){var Z,_0;Z=(_0=function(_1){return!j.Equals(_1,X);},function(_2){return g.filter(_0,_2);});return Z(Y);},shuffle:function(_3){return e.toList(e.delay(function(){var _5,_6;_5=b.random(0,_3.get_Length()-1);_6=_3.get_Item(_5);return e.append([_6],e.delay(function(){var _8;_8=b.remove(_6,_3);if(!(_8.$==0)){return b.shuffle(_8);}else{return e.empty();}}));}));},strength:function(_9){var _,ba,bb,bd,bj;_=(ba=(bb=function(bc){return b.charStrength(bc);},e.sumBy(bb,_9)),(bd=function(be){var bf,bg,bh;bf=(bg=i(be),h.log(bg))*(i(_9.get_Length())/h.log(2));bh=function(bi){return h.floor(bi);};return bh(bf);},bd(ba)));bj=function(bk){var bl;bl=b["|Weak|Medium|Strong|Best|"](bk);if(bl.$==1){return{$:1};}else{if(bl.$==2){return{$:2};}else{if(bl.$==3){return{$:3};}else{return{$:0};}}}};return bj(_);},upperCase:$.Field(function(){return e.toList(f.range(65,90));}),"|Alpha|Upper|Number|Punct|Other|":function(bl){var bm,bn,bo,br,bs,bt,bw,bx,by,bB,bC,bD;if(bm=b.alpha(),(bn=(bo=function(bp){return bp===bl;},function(bq){return e.exists(bo,bq);}),bn(bm))){return{$:0,$0:null};}else{if(br=b.upperCase(),(bs=(bt=function(bu){return bu===bl;},function(bv){return e.exists(bt,bv);}),bs(br))){return{$:1,$0:null};}else{if(bw=b.numbers(),(bx=(by=function(bz){return bz===bl;},function(bA){return e.exists(by,bA);}),bx(bw))){return{$:2,$0:null};}else{if(bB=b.punctuation(),(bC=(bD=function(bE){return bE===bl;},function(bF){return e.exists(bD,bF);}),bC(bB))){return{$:3,$0:null};}else{return{$:4,$0:null};}}}}},"|Weak|Medium|Strong|Best|":function(bG){if(bG>=128){return{$:3,$0:null};}else{if(bG<128?bG>=64:false){return{$:2,$0:null};}else{if(bG<64?bG>=56:false){return{$:1,$0:null};}else{return{$:0,$0:null};}}}}},SettingsFormlet:{Client:{SettingsFormletViewer:$.Class({get_Body:function(){return l.formlet();}}),form:$.Field(function(){var bH,bI,bJ,bQ,bS;bH=(bI=n.$(n.$(n.$(n.$((bJ=function(bK){return function(bL){return function(bM){return function(bN){return(function(bO){return function(bP){return c.Create(bK,bL,bO,bP);};}(bM))(bN);};};};},o.Return(bJ)),l.lengthSelect()),l.upperCaseCheckbox()),l.numbersCheckbox()),l.otherCheckbox()),(bQ=function(bR){return p.WithSubmitAndResetButtons(bR);},bQ(bI)));bS=function(bT){return p.WithFormContainer(bT);};return bS(bH);}),formlet:$.Field(function(){return o.Run(function(bU){var bV,bW,bX,bY,b2,b3,b4;bV=b["generate'"](bU);bW=(bX=(bY=function(bZ){return function(b0){return bZ+q.fromCharCode(b0);};},function(b1){return e.fold(bY,"",b1);}),bX(bV));b2=(b3=b.strength(bV),b3.$==1?["Medium",50,"progress progress-warning"]:b3.$==2?["Strong",75,"progress progress-success"]:b3.$==3?["Best",100,"progress progress-info"]:["Weak",25,"progress progress-danger"]);b4=$.Tupled(function(b5){var b6,b7,b8;b6=b5[0];b7=b5[1];b8=b5[2];return l.updateView(bW,b6,b7,b8);});return b4(b2);},l.form());}),lengthList:$.Field(function(){var b9,b_,b$;b9=e.toList(f.range(6,32));b_=(b$=function(ca){return[$$.String(ca),ca];},function(cb){return g.map(b$,cb);});return b_(b9);}),lengthSelect:$.Field(function(){var cc,cd;cc=r.Select(8,l.lengthList());cd=function(ce){return p.WithTextLabel("Length",ce);};return cd(cc);}),numbersCheckbox:$.Field(function(){var cf,cg;cf=r.Checkbox(false);cg=function(ch){return p.WithTextLabel("Numbers",ch);};return cg(cf);}),otherCheckbox:$.Field(function(){var ci,cj;ci=r.Checkbox(false);cj=function(ck){return p.WithTextLabel("Other",ck);};return cj(ci);}),updateView:function(cl,cm,cn,co){var cp;cp="width: "+$$.String(cn)+"%;";s("#password").attr("value",cl);s("#strengthLabel").text("Strength: "+cm);s("#progressDiv").attr("class",co);return s("#progress").attr("style",cp);},upperCaseCheckbox:$.Field(function(){var cq,cr;cq=r.Checkbox(false);cr=function(cs){return p.WithTextLabel("Upper Case",cs);};return cr(cq);})}}}});$.OnInit(function(){a=$.Safe($$.Website);b=$.Safe(a.Password);c=$.Safe(b.Settings);d=$.Safe($$.IntelliFactory.WebSharper);e=$.Safe(d.Seq);f=$.Safe(d.Operators);g=$.Safe(d.List);h=$.Safe($$.Math);i=$.Safe($$.Number);j=$.Safe(d.Unchecked);k=$.Safe(a.SettingsFormlet);l=$.Safe(k.Client);m=$.Safe(d.Formlet);n=$.Safe(m.Data);o=$.Safe(m.Formlet);p=$.Safe(m.Enhance);q=$.Safe($$.String);r=$.Safe(m.Controls);return s=$.Safe($$.jQuery);});$.OnLoad(function(){l.upperCaseCheckbox();l.otherCheckbox();l.numbersCheckbox();l.lengthSelect();l.lengthList();l.formlet();l.form();b.upperCase();b.punctuation();b.numbers();b.alpha();});}());
